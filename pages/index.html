{# YOUR HOMEPAGE #}

{# First time seeing extend or blocks? Want to know how it works? Tutorial here: http://www.webhook.com #}
{% extends "templates/partials/base.html" %}

{% block content %}
  <div class="home">
    {% set featured_video = getItem(channel.featured_video) %}
    <section class="featured-video">
      <div class="container">
        <div class="video-info">
          <h2>{{ featured_video.name }}</h2>
          <p>{{ featured_video.url_of_video.description }}</p>
          <div class="in-this-video">
            <h4>In this video</h4>
            {% for relation in featured_video.cast %}
              {% set rel = getItem(relation) %}
              {# You can ouput more than just the name. Feel free to output more fields from the CMS. #}
              <a href="{{ url(rel) }}">
                <img src="{{ rel.image|imageCrop(30) }}">
                {{ rel.name }}
              </a>
            {% endfor %}
          </div>
        </div>
        <div class="video-wrap">
          <div class="video">
            {{ featured_video.url_of_video.html|safe }}
          </div>
        </div>
      </div>
    </section>

    {% set videos = get('videos') %}
    {% set cast = get('cast') %}

    <div class="container">
      <div class="nav-list">
        <h4>Shows</h4>
        <ul>
          {% for show in shows %}
            <li>
              <a href="{{ url(show) }}">
                {{ show.name }}
              </a>
            </li>
          {% endfor %}
        </ul>
        <h4>Cast</h4>
        <ul>
          {% for cast in cast|slice(0,10) %}
            <li>
              <a href="{{ url(cast) }}">
                {{ cast.name }}
              </a>
            </li>
          {% endfor %}
        </ul>
      </div>
      <div class="recent-videos">
        <h2>Recent videos</h2>

        <ul class="boxes">
          {% for item in videos %}
            <li>
              {# Episodes and podcasts are slightly different #}
                <a href="{{ url(item) }}">
                  <img src="{{ item.url_of_video.thumbnail_url|imageSize(300) }}">
                  <h4>{{ item.name }}</h4>
                  <p class="desc">{{ item.url_of_video.description|striptags|truncate(100) }}</p>
                </a>
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
{% endblock %}
